---
title: 如何在插入相册模块
date: 2020-12-24 19:35:47
tags:
categories: 
	- yilia
	- 本地照片库
	- 静态博客
---

### 主要步骤:

* 创建本地仓库和远程仓库
* 修改代码
* 布置远端

### 创建本地仓库和远程仓库

#### **本地仓库和远程仓库的关系**

![mV0Yrj.jpg](https://s2.ax1x.com/2019/08/15/mV0Yrj.jpg)

#### 创建本地图片仓库

1.在本地博客仓库【Blog】同级目录下，**创建本地图片仓库【Blog-Back-Up】**。

<<<<<<< HEAD
{% asset_img 图片仓库.jpg  第一张本地照片 %}
=======
{% asset_img 博客和照片本地仓库.jpg  第一张本地照片 %}
>>>>>>> d3597f1ae23a600df1708c35dc3be1e73dde63d0



2.``git clone``<a href="https://github.com/CadeHu/Blog-Back-Up/tree/master" target="_blank">修饰文件</a>，将其中的3个**python文件**，放置在本地图片仓库。

<<<<<<< HEAD
{% asset_img python_files.jpg  第二张本地照片 %}
=======
{% asset_img python文件.jpg  第2张本地照片 %}
>>>>>>> d3597f1ae23a600df1708c35dc3be1e73dde63d0



3.修改``tool.py``文件，这里设置更改为为博客source目录下photos文件夹下的**数据文件**。

```python
with open("D:/Blog/source/photos/data.json","w") as fp:
        json.dump(final_dict, fp)
```

4.创建``photos``和``min_photos``文件夹，用于存放原图和缩略图

**本地图片仓库的最终样子：**

<<<<<<< HEAD
{% asset_img local_pictures.jpg  第三张本地照片 %}
=======
{% asset_img 本地图片仓库.jpg  第3张本地照片 %}
>>>>>>> d3597f1ae23a600df1708c35dc3be1e73dde63d0



#### 创建相册功能

1.在**博客**的`source`文件夹下建立一个`photos`文件夹

```bash
hexo new page photos
```

2.将下载好的修饰文件夹中的**博客修饰文件**，复制到photos文件夹下

<<<<<<< HEAD
{% asset_img modified_files.jpg  第四张本地照片 %}
=======
{% asset_img 修饰文件.jpg  第4张本地照片 %}
>>>>>>> d3597f1ae23a600df1708c35dc3be1e73dde63d0



3.【重点】删除photos文件下的``index.md``文件。（我在这里中坑了）

**photos文件夹最终样子** 就如同上图的下载好的修饰文件，只有4个文件！！！

4.在``source``文件下创建assets\img复合文件夹，将下载的<a href="https://github.com/CadeHu/Blog-Back-Up/tree/master" target="_blank">empty.png</a>放入其中。

#### 创建远程图片仓库

<<<<<<< HEAD
{% asset_img remote_pictures.jpg  第五张本地照片 %}
=======
{% asset_img 远程图片仓库.jpg  第5张本地照片 %}
>>>>>>> d3597f1ae23a600df1708c35dc3be1e73dde63d0





### 修改代码

#### 修改主题配置文件

修改yilia主题配置文件``_config.yml``

```yml
menu:
  主页: /
  随笔: /archives/index.html
  分类: /categories
  相册: /photos
```

#### 修改修饰文件

修改Blog\source\photos中的``ins.js``文件

```yml
var minSrc = 'https://raw.githubusercontent.com/CadeHu/Blog-Back-Up/master/min_photos/' + data.link[i];
var src = 'https://raw.githubusercontent.com/CadeHu/Blog-Back-Up/master/photos/' + data.link[i];
```

* url 为上述图片远程仓库中的图片地址,如下

```http
https://raw.githubusercontent.com/CadeHu/Blog-Back-Up/master/min_photos/
```

* 注意地址为Download下载页面的地址

    ![注意](https://img-blog.csdnimg.cn/20190708152411594.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwNjUxNTM1,size_16,color_FFFFFF,t_70)

### 布置到远端

